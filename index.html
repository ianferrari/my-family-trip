<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="no-referrer">
    
    <title>Travel OS Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Zen+Maru+Gothic:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        /* ğŸ¨ è¦–è¦ºè¨­å®š */
        :root {
            --bg-color: #F2F2F7;
            --bg-image: none;
            --glass-panel: #FFFFFF;
            --glass-border: rgba(0, 0, 0, 0.05);
            --text-primary: #1C1C1E;
            --text-secondary: #8E8E93;
            --neon-accent: #007AFF;
            --neon-success: #34C759;
            --neon-warn: #FF3B30;
            --price-color: #FF9500;
            --distance-color: #5856D6;
            --card-radius: 22px;
            --shadow: 0 4px 12px rgba(0,0,0,0.06);
            --chip-bg: #FFFFFF;
            --header-bg: rgba(255, 255, 255, 0.85);
            
            /* ğŸ”¤ å­—é«”è¨­å®šï¼šå„ªå…ˆä½¿ç”¨åœ“é«”(æ‰‹å¯«æ„Ÿ)ï¼Œè‹±æ–‡ç”¨ Inter */
            --main-font: 'Zen Maru Gothic', 'Inter', sans-serif;
        }

        /* ğŸŒ‘ æ·±è‰²æ¨¡å¼ (è‡ªå‹•) */
        @media (prefers-color-scheme: dark) {
            :root {
                --bg-color: #000000;
                --bg-image: radial-gradient(circle at 0% 0%, #1c1c1e 0%, #000000 100%);
                --glass-panel: rgba(28, 28, 30, 0.85);
                --glass-border: rgba(255, 255, 255, 0.12);
                --text-primary: #FFFFFF;
                --text-secondary: #9898A0;
                --neon-accent: #0A84FF;
                --neon-success: #30D158;
                --neon-warn: #FF453A;
                --price-color: #FFD60A;
                --distance-color: #BF5AF2;
                --shadow: 0 8px 24px rgba(0,0,0,0.4);
                --chip-bg: rgba(44, 44, 46, 0.6);
                --header-bg: rgba(28, 28, 30, 0.7);
            }
        }

        body { 
            font-family: var(--main-font);
            background-color: var(--bg-color); 
            background-image: var(--bg-image);
            background-attachment: fixed;
            margin: 0; padding: 0; 
            color: var(--text-primary); 
            -webkit-tap-highlight-color: transparent; 
            padding-bottom: 120px;
            transition: background 0.3s ease;
        }
        
        /* Header */
        header { 
            background: var(--header-bg); 
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            margin: 0; padding: 16px 20px; 
            border-bottom: 0.5px solid var(--glass-border);
            display: flex; justify-content: space-between; align-items: center;
            position: sticky; top: 0; z-index: 100;
        }
        header h1 { margin: 0; font-size: 22px; font-weight: 700; letter-spacing: 0.5px; }
        
        .weather-badge {
            font-size: 14px; font-weight: 700; color: var(--text-secondary);
            display: flex; align-items: center; gap: 6px;
            background: var(--chip-bg); padding: 6px 12px; border-radius: 100px;
            border: 1px solid var(--glass-border);
        }

        /* Tabs */
        .main-tabs { 
            display: flex; margin: 12px 16px; 
            background: var(--chip-bg); 
            padding: 4px; border-radius: 18px; 
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }
        .tab-btn { 
            flex: 1; border: none; background: transparent; color: var(--text-secondary); 
            padding: 10px 0; border-radius: 14px; 
            font-size: 16px; font-weight: 700; font-family: var(--main-font);
            cursor: pointer; transition: all 0.2s;
        }
        .tab-btn.active { background: var(--glass-panel); color: var(--text-primary); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        
        /* Chips */
        .sub-nav-container { margin: 0; overflow: hidden; padding: 0 0 12px 0; }
        .sub-scroll-wrapper { display: flex; gap: 8px; overflow-x: auto; padding: 0 16px 10px 16px; scrollbar-width: none; }
        .sub-scroll-wrapper::-webkit-scrollbar { display: none; }

        .chip-btn { 
            border: 1px solid var(--glass-border); background: var(--chip-bg); color: var(--text-primary);
            padding: 8px 18px; font-size: 15px; font-weight: 500; border-radius: 100px; font-family: var(--main-font);
            white-space: nowrap; cursor: pointer; transition: all 0.2s ease; backdrop-filter: blur(5px);
        }
        .chip-btn.active { background: var(--neon-accent); border-color: var(--neon-accent); color: #fff; font-weight: 700; box-shadow: 0 4px 12px rgba(0,122,255,0.3); }

        /* Filter Toggle */
        .filter-container { padding: 0 20px 8px 20px; display: flex; justify-content: flex-end; align-items: center; }
        .filter-label { font-size: 13px; font-weight: 600; color: var(--text-secondary); display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .ios-toggle { appearance: none; width: 42px; height: 24px; background: rgba(120,120,128,0.2); border-radius: 20px; position: relative; cursor: pointer; outline: none; transition: 0.3s; }
        .ios-toggle::after { content: ''; position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: #fff; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.2); transition: 0.3s; }
        .ios-toggle:checked { background: var(--neon-success); }
        .ios-toggle:checked::after { transform: translateX(18px); }

        /* Map */
        .map-wrapper { padding: 0 16px; margin: 4px 0 20px 0; }
        #map { width: 100%; height: 32vh; border-radius: var(--card-radius); box-shadow: var(--shadow); border: 1px solid var(--glass-border); background-color: #e5e5e5; }
        
        /* Cards */
        .results-container { padding: 0 16px; max-width: 600px; margin: 0 auto; }
        .place-card { 
            background: var(--glass-panel); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border); border-radius: var(--card-radius); 
            padding: 22px; margin-bottom: 16px; box-shadow: var(--shadow); 
            animation: fadeInUp 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
            display: flex; flex-direction: column;
        }

        .place-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 6px; }
        .place-name { font-size: 20px; font-weight: 700; color: var(--text-primary); line-height: 1.3; width: 70%; }
        
        .place-rating-badge { display: flex; flex-direction: column; align-items: flex-end; gap: 4px; }
        .rating-box { padding: 4px 10px; border-radius: 8px; font-size: 13px; font-weight: 800; display: flex; align-items: center; gap: 4px; font-family: 'Inter', sans-serif; }
        .rating-high { background: rgba(52, 199, 89, 0.15); color: var(--neon-success); }
        .rating-low { background: rgba(255, 59, 48, 0.15); color: var(--neon-warn); }
        
        .info-tags { display: flex; gap: 6px; font-size: 12px; font-weight: 700; margin-top: 2px; font-family: 'Inter', sans-serif; }
        .price-tag { color: var(--price-color); }
        .distance-tag { color: var(--distance-color); background: rgba(128,128,128,0.1); padding: 2px 8px; border-radius: 6px;}

        .place-meta { font-size: 14px; color: var(--text-secondary); margin-bottom: 14px; display: flex; flex-direction: column; gap: 4px; line-height: 1.4; font-weight: 500; }
        .meta-row { display: flex; align-items: center; gap: 6px; }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; flex-shrink: 0; }
        
        .review-box { 
            background: rgba(128,128,128,0.08); padding: 14px; border-radius: 16px; 
            font-size: 14px; line-height: 1.5; color: var(--text-primary); margin-bottom: 14px;
            border-left: 3px solid;
        }
        .review-box.good { border-color: var(--neon-success); }
        .review-box.bad { border-color: var(--neon-warn); background: rgba(255, 59, 48, 0.05); }
        
        .review-title { font-weight: 700; margin-bottom: 2px; display: block; font-size: 12px; opacity: 0.8; }
        .review-text { font-style: italic; opacity: 0.9; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

        .action-btn {
            display: block; width: 100%; text-align: center; 
            background: rgba(128,128,128,0.08); border: 1px solid rgba(128,128,128,0.1);
            color: var(--neon-accent); padding: 14px 0; border-radius: 16px;
            font-size: 15px; font-weight: 700; text-decoration: none; transition: all 0.2s;
        }
        .action-btn:active { background: rgba(128,128,128,0.15); transform: scale(0.98); }

        #status { text-align: center; margin: 10px 0; font-size: 12px; color: var(--text-secondary); letter-spacing: 0.5px; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<header>
    <h1>Travel OS</h1>
    <div class="weather-badge" id="weather-badge">
        ğŸ“¡ ...
    </div>
</header>

<div class="main-tabs">
    <button class="tab-btn active" onclick="selectCategory('fun')">ç©æ¨‚</button>
    <button class="tab-btn" onclick="selectCategory('food')">ç¾é£Ÿ</button>
    <button class="tab-btn" onclick="selectCategory('medical')">å¥åº·</button>
    <button class="tab-btn" onclick="selectCategory('life')">ä¾¿åˆ©</button>
</div>

<div class="sub-nav-container">
    <div class="sub-scroll-wrapper" id="sub-nav"></div>
</div>

<div class="filter-container">
    <label class="filter-label">
        åªé¡¯ç¤ºç‡Ÿæ¥­ä¸­
        <input type="checkbox" class="ios-toggle" id="openFilter" onchange="toggleFilter()">
    </label>
</div>

<div id="status">åœ°åœ–è¼‰å…¥ä¸­...</div>

<div class="map-wrapper">
    <div id="map"></div>
</div>

<div class="results-container" id="results">
    <div style="text-align: center; margin-top: 60px; opacity: 0.5;">
        <h3 style="font-weight:700; font-size:20px;">æº–å‚™æ¢ç´¢</h3>
        <p style="font-size:14px;">è«‹é»é¸ä¸Šæ–¹é¡åˆ¥é–‹å§‹</p>
    </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDyaGpwDguvqVwYGPN1CsVbuddU18dtHEs&loading=async&libraries=places,maps"></script>

<script>
    let map;
    let userLocation = null;
    let currentMarkers = [];
    let lastFetchedPlaces = []; 
    
    // è‡ªå‹•æ·±è‰²æ¨¡å¼
    const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
    const darkMapStyle = [
        { elementType: "geometry", stylers: [{ color: "#242f3e" }] },
        { elementType: "labels.text.stroke", stylers: [{ color: "#242f3e" }] },
        { elementType: "labels.text.fill", stylers: [{ color: "#746855" }] },
        { featureType: "road", elementType: "geometry", stylers: [{ color: "#38414e" }] },
        { featureType: "road", elementType: "geometry.stroke", stylers: [{ color: "#212a37" }] },
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#17263c" }] }
    ];

    const CATEGORIES = {
        'fun': [
            { name: "é™„è¿‘å…¬åœ’", query: "å…¬åœ’", icon: "ğŸ›" },
            { name: "è§€å…‰æ™¯é»", query: "è§€å…‰æ™¯é» æ‰“å¡æ™¯é»", icon: "ğŸ“¸" },
            { name: "ç™¾è²¨è³¼ç‰©", query: "ç™¾è²¨å…¬å¸ è³¼ç‰©ä¸­å¿ƒ å•†å ´", icon: "ğŸ›ï¸" },
            { name: "å®¤å…§éŠæ¨‚", query: "å®¤å…§éŠæ¨‚åœ’ è¦ªå­é¤¨ éŠæˆ²å ´", icon: "ğŸ§©" },
            { name: "æ›¸åº—åœ–é¤¨", query: "æ›¸åº— åœ–æ›¸é¤¨", icon: "ğŸ“š" }
        ],
        'food': [
            { name: "æ‰‹æ–é£²æ–™", query: "æ‰‹æ–é£² é£²æ–™åº— 50åµ å¯ä¸å¯", icon: "ğŸ§‹" },
            { name: "å¯µç‰©å‹å–„", query: "å¯µç‰©å‹å–„é¤å»³ å¯µç‰©é¤å»³ è²“å’ªé¤å»³", icon: "ğŸ¾" },
            { name: "è¦ªå­é¤å»³", query: "è¦ªå­é¤å»³ è¦ªå­å‹å–„", icon: "ğŸ‘¶" },
            { name: "å’–å•¡ç”œé»", query: "å’–å•¡å»³ ç”œé»", icon: "ğŸ°" },
            { name: "åœ¨åœ°å°åƒ", query: "å°åƒ éºµåº— ä¾¿ç•¶", icon: "ğŸœ" },
            { name: "ç«é‹ç‡’è‚‰", query: "ç«é‹ ç‡’è‚‰", icon: "ğŸ”¥" }
        ],
        'medical': [
            { name: "ä¸€èˆ¬è¨ºæ‰€", query: "è¨ºæ‰€ å®¶é†«ç§‘ å…§ç§‘", icon: "ğŸ©º" },
            { name: "è€³é¼»å–‰ç§‘", query: "è€³é¼»å–‰ç§‘è¨ºæ‰€", icon: "ğŸ‘‚" },
            { name: "å°å…’ç§‘", query: "å°å…’ç§‘", icon: "ğŸ‘¶" },
            { name: "æ€¥è¨ºé†«é™¢", query: "é†«é™¢ æ€¥è¨º", icon: "ğŸ¥" },
            { name: "è—¥å±€", query: "è—¥å±€", icon: "ğŸ’Š" },
            { name: "å¯µç‰©é†«é™¢", query: "å‹•ç‰©é†«é™¢ ç¸é†« 24å°æ™‚å‹•ç‰©é†«é™¢", icon: "ğŸ¶" }
        ],
        'life': [
            { name: "å‹•ç‰©æ°´æ—", query: "å¯µç‰©åº— æ°´æ—é¤¨ é­šä¸­é­š", icon: "ğŸ " },
            { name: "ä¾¿åˆ©è¶…å•†", query: "ä¾¿åˆ©å•†åº— 7-11 å…¨å®¶", icon: "ğŸª" },
            { name: "åœè»Šå ´", query: "åœè»Šå ´", icon: "ğŸ…¿ï¸" },
            { name: "åŠ æ²¹ç«™", query: "åŠ æ²¹ç«™", icon: "â›½" }
        ]
    };

    window.onload = async () => { 
        renderSubNav('fun'); 
        await initMap(25.0478, 121.5170); // é è¨­å°åŒ—

        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    userLocation = { lat: position.coords.latitude, lng: position.coords.longitude };
                    map.setCenter(userLocation);
                    new google.maps.Marker({
                        position: userLocation, map: map,
                        icon: { path: google.maps.SymbolPath.CIRCLE, scale: 8, fillColor: "#007AFF", fillOpacity: 1, strokeWeight: 2, strokeColor: "white" }
                    });
                    fetchWeather(userLocation.lat, userLocation.lng);
                    document.getElementById('status').innerText = "å®šä½æˆåŠŸ";
                },
                (err) => { document.getElementById('status').innerText = "âš ï¸ å®šä½å¤±æ•—ï¼Œè«‹é–‹å•ŸGPS"; }
            );
        }
    };

    darkModeQuery.addListener((e) => {
        if(map) map.setOptions({ styles: e.matches ? darkMapStyle : [] });
    });

    async function fetchWeather(lat, lng) {
        try {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lng}&current_weather=true`);
            const data = await res.json();
            const temp = Math.round(data.current_weather.temperature);
            const code = data.current_weather.weathercode;
            let icon = "â˜ï¸";
            if(code <= 1) icon = "â˜€ï¸"; else if(code <= 3) icon = "â›…"; else if(code <= 60) icon = "ğŸŒ§ï¸"; else icon = "â›ˆï¸";
            document.getElementById('weather-badge').innerHTML = `${icon} ${temp}Â°C`;
        } catch(e) {}
    }

    function selectCategory(cat) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.currentTarget.classList.add('active');
        renderSubNav(cat);
    }

    function renderSubNav(cat) {
        const container = document.getElementById('sub-nav');
        container.innerHTML = '';
        CATEGORIES[cat].forEach((opt) => {
            const btn = document.createElement('button');
            btn.className = 'chip-btn';
            btn.innerHTML = `${opt.icon} ${opt.name}`;
            btn.onclick = () => startSearch(opt.query, btn);
            container.appendChild(btn);
        });
    }

    function toggleFilter() {
        if (lastFetchedPlaces.length > 0) displayResults(lastFetchedPlaces); 
    }

    function startSearch(query, btnElement) {
        document.querySelectorAll('.chip-btn').forEach(b => b.classList.remove('active'));
        btnElement.classList.add('active');
        
        const center = userLocation || map.getCenter();
        const searchLoc = { lat: typeof center.lat === 'function' ? center.lat() : center.lat, lng: typeof center.lng === 'function' ? center.lng() : center.lng };
        performSearch(searchLoc, query);
    }

    async function initMap(lat, lng) {
        const { Map } = await google.maps.importLibrary("maps");
        const isDark = darkModeQuery.matches;
        map = new Map(document.getElementById("map"), {
            center: { lat, lng }, zoom: 15, mapId: "DEMO_MAP_ID", 
            disableDefaultUI: true, gestureHandling: "greedy",
            styles: isDark ? darkMapStyle : [] 
        });
    }

    async function performSearch(location, query) {
        document.getElementById('status').innerText = `æœå°‹ï¼š${query}...`;
        currentMarkers.forEach(m => m.setMap(null)); currentMarkers = [];
        document.getElementById('results').innerHTML = '<div style="text-align:center; padding:40px; opacity:0.6;"><p>è³‡æ–™è®€å–ä¸­...</p></div>';

        const { Place } = await google.maps.importLibrary("places");
        const { SearchByTextRankPreference } = await google.maps.importLibrary("places");

        try {
            const { places } = await Place.searchByText({
                textQuery: query,
                fields: ['displayName', 'location', 'businessStatus', 'rating', 'formattedAddress', 'id', 'userRatingCount', 'reviews', 'priceLevel', 'currentOpeningHours'],
                maxResultCount: 20, language: 'zh-TW',
                locationBias: { center: location }, 
                rankPreference: SearchByTextRankPreference.DISTANCE, 
                isOpenNow: false
            });
            
            if (places && places.length > 0) {
                lastFetchedPlaces = places;
                displayResults(places);
                document.getElementById('status').innerText = "æœå°‹å®Œæˆ";
            } else {
                document.getElementById('results').innerHTML = '<div style="text-align:center; padding:40px; opacity:0.6;"><p>é™„è¿‘æ²’æœ‰çµæœ</p></div>';
            }
        } catch (e) {
            document.getElementById('results').innerHTML = `<div style="text-align:center; padding:30px; color:var(--neon-warn);"><h3>API é€£ç·šå¤±æ•—</h3></div>`;
        }
    }

    function displayResults(places) {
        const resultsDiv = document.getElementById('results');
        resultsDiv.innerHTML = "";
        const filterOpen = document.getElementById('openFilter').checked;
        let visibleCount = 0;

        places.forEach((place, index) => {
            const isOpen = place.businessStatus === 'OPERATIONAL';
            if (filterOpen && !isOpen) return;
            visibleCount++;

            const name = place.displayName || "Unknown";
            const rating = place.rating || 0;
            const count = place.userRatingCount ? `(${place.userRatingCount})` : "";
            let address = place.formattedAddress ? place.formattedAddress.replace(/^[^å¸‚]+[å¸‚ç¸£]/, '').replace(/^\d+/, '') : "";
            const mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name)}&query_place_id=${place.id}`;
            
            let distStr = "";
            if (userLocation && place.location) {
                const R = 6371; 
                const dLat = (place.location.lat() - userLocation.lat) * Math.PI / 180;
                const dLon = (place.location.lng() - userLocation.lng) * Math.PI / 180;
                const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(userLocation.lat * Math.PI / 180) * Math.cos(place.location.lat() * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
                const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
                const d = R * c;
                distStr = d < 1 ? `${Math.round(d * 1000)}m` : `${d.toFixed(1)}km`;
            }

            let priceStr = "";
            if (place.priceLevel) {
                if(place.priceLevel.includes("INEXPENSIVE")) priceStr = "$";
                else if(place.priceLevel.includes("MODERATE")) priceStr = "$$";
                else if(place.priceLevel.includes("VERY")) priceStr = "$$$$";
                else priceStr = "$$$";
            }

            let hoursStr = "";
            if (place.currentOpeningHours && place.currentOpeningHours.weekdayDescriptions) {
                const day = new Date().getDay(); 
                const apiIdx = (day + 6) % 7;
                if(place.currentOpeningHours.weekdayDescriptions[apiIdx]) {
                    hoursStr = place.currentOpeningHours.weekdayDescriptions[apiIdx].split(": ")[1] || "";
                }
            }

            const isLow = rating > 0 && rating < 4.0;
            let reviewHtml = "";
            if (place.reviews && place.reviews.length > 0) {
                const txt = place.reviews[0].text;
                const color = isLow ? "var(--neon-warn)" : "var(--neon-success)";
                const title = isLow ? `âš ï¸ è©•åˆ†åä½ (${rating})` : "ğŸ’¬ æœ€æ–°è©•åƒ¹";
                reviewHtml = `<div class="review-box ${isLow?'bad':'good'}"><span class="review-title" style="color:${color}">${title}</span><span class="review-text">"${txt}"</span></div>`;
            } else if (isLow) {
                reviewHtml = `<div class="review-box bad"><span class="review-title" style="color:var(--neon-warn)">âš ï¸ è©•åˆ†ä½æ–¼ 4.0</span></div>`;
            }

            const card = document.createElement('div');
            card.className = 'place-card';
            card.style.animationDelay = `${index * 0.05}s`;
            card.innerHTML = `
                <div class="place-header">
                    <div class="place-name">${name}</div>
                    <div class="place-rating-badge">
                        <div class="rating-box ${isLow?'rating-low':'rating-high'}">${rating > 0 ? 'â˜… ' + rating : 'New'} <span style="font-weight:400; opacity:0.7; font-size:11px">${count}</span></div>
                        <div class="info-tags"><span class="distance-tag">ğŸ“ ${distStr}</span><span class="price-tag">${priceStr}</span></div>
                    </div>
                </div>
                <div class="place-meta">
                    <div class="meta-row">${isOpen ? '<span class="status-dot" style="background:var(--neon-success)"></span><span style="color:var(--neon-success)">ç‡Ÿæ¥­ä¸­</span>' : '<span class="status-dot" style="background:var(--neon-warn)"></span><span style="color:var(--neon-warn)">ä¼‘æ¯ä¸­</span>'} <span>ğŸ•’ ${hoursStr}</span></div>
                    <div class="meta-row">â€¢ ${address}</div>
                </div>
                ${reviewHtml}
                <a href="${mapUrl}" target="_blank" class="action-btn">NAVIGATE âœ</a>
            `;
            resultsDiv.appendChild(card);
            
            const marker = new google.maps.Marker({
                position: place.location, map: map, title: name,
                label: { text: (index + 1).toString(), color: "black", fontWeight: "bold" }
            });
            marker.addListener("click", () => card.scrollIntoView({ behavior: "smooth", block: "center" }));
            currentMarkers.push(marker);
        });

        if (visibleCount === 0 && places.length > 0) resultsDiv.innerHTML = '<div style="text-align:center; padding:40px; color:var(--text-secondary);"><p>ç¯©é¸å¾Œç„¡çµæœ</p></div>';
    }
</script>
</body>
</html>
